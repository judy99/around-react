(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{14:function(e,a,t){},15:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(5),c=t.n(o),i=(t(14),t(8)),l=t(1);var s=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("a",{href:"/",className:"link header__logo logo"},"Around",r.a.createElement("span",{className:"logo__small"},"The U.S.")))};var u=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S."))},m=r.a.createContext();var d=function(e){var a=r.a.useContext(m),t=e.card.owner._id===a._id,n=e.card.likes.some((function(e){return e._id===a._id})),o="btn gallery__icon-trash ".concat(t?" ":"gallery__icon-trash_hidden");return r.a.createElement("li",{className:"gallery__item",onClick:function(a){e.onCardClick(e.card)},style:{backgroundImage:"url(".concat(e.card.link,")")}},r.a.createElement("button",{className:o,onClick:function(a){a.stopPropagation(),e.onCardDelete(e.card)}}),r.a.createElement("div",{className:"gallery__bottom"},r.a.createElement("h2",{className:"gallery__title"},e.card.name),r.a.createElement("div",{className:"gallery__like-wrapper"},r.a.createElement("button",{className:"btn gallery__like ".concat(n?"gallery__like_active":""," "),onClick:function(a){a.stopPropagation(),e.onCardLike(e.card)}}),r.a.createElement("div",{className:"gallery__score"},e.card.likes.length))))};var p=function(e){var a=r.a.useContext(m);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__person"},r.a.createElement("div",{className:"profile__avatar-wrapper"},r.a.createElement("img",{src:a.avatar,alt:"User ptofile avatar",className:"profile__avatar"}),r.a.createElement("div",{className:"profile__avatar-hover",onClick:e.onEditAvatar})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__info-wrapper"},r.a.createElement("h1",{className:"profile__name"},a.name),r.a.createElement("button",{type:"button",className:"btn profile__edit-btn",onClick:e.onEditProfile})),r.a.createElement("p",{className:"profile__occupation"},a.about))),r.a.createElement("button",{type:"button",className:"btn profile__add-btn",onClick:e.onAddPlace})),r.a.createElement("ul",{className:"gallery"},e.cards.map((function(a){return r.a.createElement(d,{card:a,key:a._id,onCardClick:e.onSelectedCard,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})})))),"/>")},f=t(6),h=t(7),_=new(function(){function e(a){var t=a.baseUrl,n=a.headers;Object(f.a)(this,e),this.baseUrl=t,this.headers=n}return Object(h.a)(e,[{key:"getInitialCards",value:function(){return fetch(this.baseUrl+"/cards",{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch(this.baseUrl+"/users/me",{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addCard",value:function(e){var a=e.name,t=e.link;return fetch(this.baseUrl+"/cards",{headers:this.headers,method:"POST",body:JSON.stringify({name:a,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeCard",value:function(e){return fetch(this.baseUrl+"/cards/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"addLike",value:function(e){return fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"PUT"}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeLike",value:function(e){return fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,a){return a?fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"PUT"}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})):fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserInfo",value:function(e){var a=e.name,t=e.about;return fetch(this.baseUrl+"/users/me",{headers:this.headers,method:"PATCH",body:JSON.stringify({name:a,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"setUserAvatar",value:function(e){var a=e.avatar;return fetch(this.baseUrl+"/users/me/avatar",{headers:this.headers,method:"PATCH",body:JSON.stringify({avatar:a})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-2",headers:{authorization:"93454fed-b8d7-4b37-acbd-87ed08b659ea","Content-Type":"application/json"}});var v=function(e){return r.a.createElement("div",{className:"popup ".concat(e.isOpen?"popup_opened":"")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("span",{className:"popup__close",onClick:e.onClose},"+"),r.a.createElement("form",{action:"#",method:"post",className:"form ".concat(e.name),name:"".concat(e.name),onSubmit:e.onSubmit,noValidate:!0},r.a.createElement("h2",{className:"".concat(e.name,"__heading")},e.title),e.children,r.a.createElement("input",{type:"submit",name:"save",className:"btn form__submit ".concat(e.name,"__save"),value:e.value}))))};var E=function(e){var a=r.a.useContext(m),t=r.a.useState(""),n=Object(l.a)(t,2),o=n[0],c=n[1],i=r.a.useState(""),s=Object(l.a)(i,2),u=s[0],d=s[1];return r.a.useEffect((function(){c(o||a.name),d(u||a.about)}),[o,u,a.name,a.about]),r.a.createElement(v,{title:"Edit profile",name:"edit-profile",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateUser({name:o,about:u})},value:"Save"},r.a.createElement("input",{type:"text",name:"name",id:"name-input",className:"form__input edit-profile__name",placeholder:"Name",minLength:"2",maxLength:"40",value:o||"",onChange:function(e){c(e.target.value)},required:!0}),r.a.createElement("span",{id:"name-input-error",className:"form__input-error"}),r.a.createElement("input",{type:"text",name:"job",id:"job-input",className:"form__input edit-profile__job",placeholder:"About me",minLength:"2",maxLength:"200",onChange:function(e){d(e.target.value)},value:u||"",required:!0}),r.a.createElement("span",{id:"job-input-error",className:"form__input-error"}))};var b=function(e){var a=r.a.useRef();return r.a.createElement(v,{title:"Change profile picture",name:"change-avatar",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:a.current.value}),a.current.value=""},value:"Save"},r.a.createElement("input",{type:"url",name:"avatar-link",id:"avatar-input",ref:a,className:"form__input change-avatar__link",placeholder:"Image URL",required:!0}),r.a.createElement("span",{id:"avatar-input-error",className:"form__input-error"}))};var g=function(e){var a=r.a.useState(""),t=Object(l.a)(a,2),n=t[0],o=t[1],c=r.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1];return r.a.createElement(v,{title:"New place",name:"add-card",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onAddPlace({name:n,link:s}),o(""),u("")},value:"Add place"},r.a.createElement("input",{type:"text",name:"name",id:"title-input",value:n,onChange:function(e){o(e.target.value)},className:"form__input add-card__title",placeholder:"Title",minLength:"2",maxLength:"30",required:!0}),r.a.createElement("span",{id:"title-input-error",className:"form__input-error"}),r.a.createElement("input",{type:"url",name:"link",id:"link-input",value:s,onChange:function(e){u(e.target.value)},className:"form__input add-card__image-link",placeholder:"Image URL",required:!0}),r.a.createElement("span",{id:"link-input-error",className:"form__input-error"}))};var k=function(e){return r.a.createElement(v,{title:"Are you sure?",name:"delete-card",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onConfirmDelete(e.card)},value:"Yes"})};var C=function(e){return null!==e.card?r.a.createElement("div",{className:"popup popup_dark popup_opened"},r.a.createElement("div",{className:"popup__container popup__container_photo"},r.a.createElement("span",{className:"popup__close",onClick:e.onClose},"+"),r.a.createElement("figure",{className:"photo"},r.a.createElement("img",{className:"photo__item",src:e.card.link,alt:e.card.name}),r.a.createElement("figcaption",{className:"photo__title"},e.card.name)))):r.a.createElement(r.a.Fragment,null)};var N=function(){var e=r.a.useState(!1),a=Object(l.a)(e,2),t=a[0],n=a[1],o=r.a.useState(!1),c=Object(l.a)(o,2),d=c[0],f=c[1],h=r.a.useState(!1),v=Object(l.a)(h,2),N=v[0],y=v[1],j=r.a.useState(!1),O=Object(l.a)(j,2),S=O[0],U=O[1],P=r.a.useState(!1),A=Object(l.a)(P,2),L=A[0],w=A[1],D=r.a.useState(!1),I=Object(l.a)(D,2),T=I[0],x=I[1],q=r.a.useState(null),J=Object(l.a)(q,2),R=J[0],W=J[1],B=r.a.useState(null),F=Object(l.a)(B,2),H=F[0],z=F[1],M=r.a.useState([]),V=Object(l.a)(M,2),Y=V[0],$=V[1],G=r.a.useState({}),K=Object(l.a)(G,2),Q=K[0],X=K[1];function Z(){y(!1),n(!1),f(!1),W(null),U(!1)}return r.a.useEffect((function(){_.getInitialCards().then((function(e){$(e)})).catch((function(e){return console.log(e)}))}),[Y]),r.a.useEffect((function(){_.getUserInfo().then((function(e){X(e)})).catch((function(e){return console.log(e)}))})),r.a.createElement("div",{className:"page ".concat(T?"loader":"")},r.a.createElement(s,null),r.a.createElement(m.Provider,{value:Q},r.a.createElement(p,{onEditProfile:function(){n(!0)},onEditAvatar:function(){y(!0)},onAddPlace:function(){f(!0)},isEditProfilePopupOpen:t,isAddPlacePopupOpen:d,isEditAvatarPopupOpen:N,isDeleteConfirmationPopup:S,isPopupWithImageOpen:L,selectedCard:R,onSelectedCard:function(e){w(!0),W(e)},cards:Y,onCardLike:function(e){var a=e.likes.some((function(e){return e._id===Q._id}));_.changeLikeCardStatus(e._id,!a).then((function(a){var t=Y.map((function(t){return t._id===e._id?a:t}));$(t)}))},onCardDelete:function(e){U(!S),z(e)}}),r.a.createElement(E,{isOpen:t,onClose:Z,onUpdateUser:function(e){x(!0),Z(),_.updateUserInfo(e).then((function(e){Q.name=e.name,Q.about=e.about})).catch((function(e){return console.log(e)})).finally((function(){x(!1)}))}}),r.a.createElement(b,{isOpen:N,onClose:Z,onUpdateAvatar:function(e){Z(),x(!0),_.setUserAvatar(e).then((function(e){Q.avatar=e.avatar})).catch((function(e){return console.log(e)})).finally((function(){x(!1)}))}}),r.a.createElement(g,{isOpen:d,onClose:Z,onAddPlace:function(e){Z(),x(!0),_.addCard(e).then((function(e){$([].concat(Object(i.a)(Y),[e]))})).catch((function(e){return console.log(e)})).finally((function(){x(!1)}))}}),r.a.createElement(k,{isOpen:S,onClose:Z,onConfirmDelete:function(){x(!0),Z(),S&&_.removeCard(H._id).then((function(){var e=Y.filter((function(e){return e._id!==H._id}));$(e)})).catch((function(e){return console.log(e)})).finally((function(){z(null),x(!1)}))}}),r.a.createElement(C,{isOpen:L,card:R,onClose:Z})),r.a.createElement(u,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,a,t){e.exports=t(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.19c3ad0d.chunk.js.map